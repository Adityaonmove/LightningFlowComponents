<template>

    <!-- =============== Data Source Banner =============== -->
    <div style={bannerStyle} class={bannerMargin}>
        <h1 class={bannerClass}>Data Source</h1>
    </div>

    <!-- Select SObject -->
    <c-fsc_pick-object-and-field 
        if:true={isSObjectInput}
        field-label={inputValues.fieldName.label}
        object-label={inputValues.objectName.label} 
        object-type={selectedSObject}
        field={inputValues.fieldName.value} 
        onfieldselected={handleDynamicTypeMapping}
        hide-field-picklist=true>
    </c-fsc_pick-object-and-field>

    <!-- Data Source -->
    <c-fsc_flow-combobox 
        if:true={isObjectSelected}
        name="select_tableData" 
        label={inputValues.tableData.label}
        value={inputValues.tableData.value} 
        value-type={inputValues.tableData.valueDataType}
        builder-context-filter-type={selectedSObject}
        builder-context-filter-collection-boolean={inputValues.tableData.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <c-fsc_flow-combobox 
        if:false={isSObjectInput}
        name="select_tableDataString" 
        label={inputValues.tableDataString.label}
        value={inputValues.tableDataString.value} 
        value-type={inputValues.tableDataString.valueDataType}
        builder-context-filter-collection-boolean={inputValues.tableDataString.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <!-- Pre-Selected Rows -->
    <c-fsc_flow-combobox 
        if:true={isObjectSelected}
        name="select_preSelectedRows" 
        label={inputValues.preSelectedRows.label}
        value={inputValues.preSelectedRows.value} 
        value-type={inputValues.preSelectedRows.valueDataType}
        builder-context-filter-type={selectedSObject}
        builder-context-filter-collection-boolean={inputValues.preSelectedRows.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <c-fsc_flow-combobox 
        if:false={isSObjectInput}
        name="select_preSelectedRowsString" 
        label={inputValues.preSelectedRowsString.label}
        value={inputValues.preSelectedRowsString.value} 
        value-type={inputValues.preSelectedRowsString.valueDataType}
        builder-context-filter-collection-boolean={inputValues.preSelectedRowsString.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <!-- =============== Column Wizard Banner =============== -->
    <div style={bannerStyle} class={bannerMargin}>
        <h1 class={bannerClass}>Column Wizard</h1>
    </div>
    
    <!-- Column Wizard -->
    <div if:true={isObjectSelected}> 

        <div class="slds-box slds-theme_shade slds-m-top_small">
            <div align="center">
                <lightning-button label="Load Column Wizard" icon-name="utility:lightning_extension" onclick={showModal}></lightning-button>
            </div>
        </div>

        <template if:true={openModal}>
            <div class="slds-modal slds-modal_large slds-fade-in-open slds-backdrop">
                <div class="slds-modal__container">

                    <!-- Header Section -->
                    <div class="slds-modal__header">
                        <lightning-button-icon icon-name="utility:close"
                            alternative-text="Close this window" size="large" variant="bare-inverse"
                            onclick={closeModal} class="slds-modal__close">
                        </lightning-button-icon>
                        <h2>Welcome To The Datatable Column Wizard</h2>
                    </div>

                    <!-- Body Section -->
                    <div class="slds-modal__content slds-p-around_medium">
                        <c-screen-flow width="100%" height="560"
                            flow-name="Datatable_Configuration_Wizard" name="uniqueName"
                            flow-params={wizardParams}
                            onflowstatuschange={handleFlowStatusChange}>
                        </c-screen-flow>
                    </div>

                    <!-- Footer Section -->
                    <div class="slds-modal__footer slds-modal__footer_directional">
                        <lightning-button label="Cancel Wizard" variant="neutral"
                            icon-name="utility:close" 
                            onclick={closeModal}>
                        </lightning-button>
                    </div>

                </div>
            </div>
        </template>

    </div>

    <!-- =============== Table Formatting Banner =============== -->
    <div style={bannerStyle} class={bannerMargin}>
        <h1 class={bannerClass}>Table Formatting</h1>
    </div>

    <!-- Table Header -->
    <c-fsc_flow-combobox 
        name="select_tableLabel" 
        label={inputValues.tableLabel.label}
        value={inputValues.tableLabel.value} 
        value-type={inputValues.tableLabel.valueDataType}
        builder-context-filter-collection-boolean={inputValues.tableLabel.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>
    <c-fsc_flow-combobox 
        name="select_tableIcon" 
        label={inputValues.tableIcon.label}
        value={inputValues.tableIcon.value} 
        value-type={inputValues.tableIcon.valueDataType}
        field-level-help={inputValues.tableIcon.helpText}
        builder-context-filter-collection-boolean={inputValues.tableIcon.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <!-- Other Table Formatting -->
    <lightning-input class="slds-m-vertical_xx-small"
        type="checkbox" 
        label={inputValues.tableBorder.label} 
        name="select_tableBorder"
        checked={inputValues.tableBorder.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>
    <c-fsc_flow-combobox 
        name="select_tableHeight" 
        label={inputValues.tableHeight.label}
        value={inputValues.tableHeight.value} 
        value-type={inputValues.tableHeight.valueDataType}
        field-level-help={inputValues.tableHeight.helpText}
        builder-context-filter-collection-boolean={inputValues.tableHeight.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>
    <c-fsc_flow-combobox 
        name="select_maxNumberOfRows" 
        label={inputValues.maxNumberOfRows.label}
        value={inputValues.maxNumberOfRows.value} 
        value-type={inputValues.maxNumberOfRows.valueDataType}
        field-level-help={inputValues.maxNumberOfRows.helpText}
        builder-context-filter-collection-boolean={inputValues.maxNumberOfRows.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <!-- =============== Table Behavior Banner =============== -->
    <div style={bannerStyle} class={bannerMargin}>
        <h1 class={bannerClass}>Table Behavior</h1>
    </div>

    <!-- Table Behavior Options -->
    <lightning-input class="slds-m-vertical_xx-small"
        type="checkbox" 
        label={inputValues.suppressNameFieldLink.label} 
        name="select_suppressNameFieldLink"
        checked={inputValues.suppressNameFieldLink.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>
    <lightning-input class="slds-m-vertical_xx-small"
        if:true={isHideCheckboxColumn}
        type="checkbox" 
        label={inputValues.hideCheckboxColumn.label} 
        name="select_hideCheckboxColumn"
        checked={inputValues.hideCheckboxColumn.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>
    <lightning-input class="slds-m-vertical_xx-small"
    if:false={isCheckboxColumnHidden}
        type="checkbox" 
        label={inputValues.isRequired.label} 
        name="select_isRequired"
        checked={inputValues.isRequired.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>
    <lightning-input class="slds-m-vertical_xx-small"
        if:false={isCheckboxColumnHidden}
        type="checkbox" 
        label={inputValues.singleRowSelection.label} 
        name="select_singleRowSelection"
        checked={inputValues.singleRowSelection.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>   

    <!-- =============== Advanced Attributes Banner =============== -->
    <div style={bannerStyle} class={bannerMargin}>
        <h1 class={bannerClass}>Advanced Attributes</h1>
    </div>

    <!-- Apex Defined Object? -->
    <lightning-input class="slds-m-vertical_xx-small"
        type="checkbox" 
        label={inputValues.isUserDefinedObject.label} 
        name="select_isUserDefinedObject"
        checked={inputValues.isUserDefinedObject.value} 
        onblur={handleValueChange}
        onchange={handleValueChange}>
    </lightning-input>

    <!-- Key Field -->
    <c-fsc_flow-combobox 
        name="select_keyField" 
        label={inputValues.keyField.label}
        value={inputValues.keyField.value} 
        value-type={inputValues.keyField.valueDataType}
        field-level-help={inputValues.keyField.helpText}
        builder-context-filter-collection-boolean={inputValues.keyField.isCollection}
        builder-context={_builderContext} 
        onvaluechanged={handleFlowComboboxValueChange}>
    </c-fsc_flow-combobox>

    <!-- <div class="slds-panel__header-title slds-text-heading_small slds-p-top_small">
        {inputValues.allOptionsStringFormat.label}
    </div>
    <lightning-radio-group name="select_allOptionsStringFormat" options={}
        value={inputValues.allOptionsStringFormat.value} type="radio" onchange={handleValueChange}>
    </lightning-radio-group>
    <lightning-input class="slds-p-top_small" type="checkbox" label={inputValues.disableReordering.label}
        name="select_disableReordering" checked={inputValues.disableReordering.value}
        onblur={handleValueChange}></lightning-input>
    <lightning-input type="checkbox" label={inputValues.required.label} name="select_required"
        checked={inputValues.required.value} onblur={handleValueChange}></lightning-input>

    <div class="slds-panel__header-title slds-text-heading_small slds-p-top_small">All Options</div>
    <c-fbc_flow-combobox if:true={isObject} name="select_allOptionsFieldDescriptorList"
        label={inputValues.allOptionsFieldDescriptorList.label}
        value={inputValues.allOptionsFieldDescriptorList.value}
        value-type={inputValues.allOptionsFieldDescriptorList.valueDataType}
        builder-context-filter-collection-boolean={inputValues.allOptionsFieldDescriptorList.isCollection}
        builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}></c-fbc_flow-combobox>
    <c-fbc_flow-combobox if:true={isTwoLists} name="select_allOptionsStringCollectionLabels"
        label={inputValues.allOptionsStringCollectionLabels.label}
        value={inputValues.allOptionsStringCollectionLabels.value}
        value-type={inputValues.allOptionsStringCollectionLabels.valueDataType}
        builder-context-filter-type="String"
        builder-context-filter-collection-boolean={inputValues.allOptionsStringCollectionLabels.isCollection}
        builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}></c-fbc_flow-combobox>
    <c-fbc_flow-combobox if:true={isLists} name="select_allOptionsStringCollection"
        label={inputValues.allOptionsStringCollection.label}
        value={inputValues.allOptionsStringCollection.value}
        value-type={inputValues.allOptionsStringCollection.valueDataType} builder-context-filter-type="String"
        builder-context-filter-collection-boolean={inputValues.allOptionsStringCollection.isCollection}
        builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}></c-fbc_flow-combobox>
    <c-fbc_flow-combobox if:true={isCSV} name="select_allOptionsCSV" label={inputValues.allOptionsCSV.label}
        value={inputValues.allOptionsCSV.value} value-type={inputValues.allOptionsCSV.valueDataType}
        builder-context-filter-type="String"
        builder-context-filter-collection-boolean={inputValues.allOptionsCSV.isCollection}
        builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}></c-fbc_flow-combobox>

    <div class="slds-panel__header-title slds-text-heading_small slds-p-top_small">Values</div>
    <div class="border-bottom-2px slds-p-bottom_small">
        <c-fbc_flow-combobox if:true={isLists} name="select_selectedOptionsStringList"
            label={inputValues.selectedOptionsStringList.label}
            value={inputValues.selectedOptionsStringList.value}
            value-type={inputValues.selectedOptionsStringList.valueDataType}
            builder-context-filter-type="String"
            builder-context-filter-collection-boolean={inputValues.selectedOptionsStringList.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
        <c-fbc_flow-combobox if:true={isCSV} name="select_selectedOptionsCSV"
            label={inputValues.selectedOptionsCSV.label} value={inputValues.selectedOptionsCSV.value}
            value-type={inputValues.selectedOptionsCSV.valueDataType} builder-context-filter-type="String"
            builder-context-filter-collection-boolean={inputValues.selectedOptionsCSV.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
        <c-fbc_flow-combobox if:true={isObject} name="select_selectedOptionsFieldDescriptorList"
            label={inputValues.selectedOptionsFieldDescriptorList.label}
            value={inputValues.selectedOptionsFieldDescriptorList.value}
            value-type={inputValues.selectedOptionsFieldDescriptorList.valueDataType}
            builder-context-filter-collection-boolean={inputValues.selectedOptionsFieldDescriptorList.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
        <template if:true={isObject}>
            <lightning-input type="text" label={inputValues.useWhichObjectKeyForLabel.label}
                name="select_useWhichObjectKeyForLabel"
                value={inputValues.useWhichObjectKeyForLabel.value} onblur={handleValueChange}>
            </lightning-input>
            <lightning-input type="text" label={inputValues.useWhichObjectKeyForData.label}
                name="select_useWhichObjectKeyForData"
                value={inputValues.useWhichObjectKeyForData.value} onblur={handleValueChange}>
            </lightning-input>
            <lightning-input type="text" label={inputValues.useWhichObjectKeyForSort.label}
                name="select_useWhichObjectKeyForSort"
                value={inputValues.useWhichObjectKeyForSort.value} onblur={handleValueChange}>
            </lightning-input>
        </template>
    </div>
    <div class="slds-panel__header-title slds-text-heading_small slds-p-top_small">Labels</div>
    <div class="border-bottom-2px slds-p-bottom_small">
        <c-fbc_flow-combobox name="select_label" label={inputValues.label.label} value={inputValues.label.value}
            value-type={inputValues.label.valueDataType} builder-context-filter-type="String"
            builder-context-filter-collection-boolean={inputValues.label.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
        <c-fbc_flow-combobox name="select_sourceLabel" label={inputValues.sourceLabel.label}
            value={inputValues.sourceLabel.value} value-type={inputValues.sourceLabel.valueDataType}
            builder-context-filter-type="String"
            builder-context-filter-collection-boolean={inputValues.sourceLabel.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
        <c-fbc_flow-combobox name="select_selectedLabel" label={inputValues.selectedLabel.label}
            value={inputValues.selectedLabel.value} value-type={inputValues.selectedLabel.valueDataType}
            builder-context-filter-type="String"
            builder-context-filter-collection-boolean={inputValues.selectedLabel.isCollection}
            builder-context={_builderContext} onvaluechanged={handleFlowComboboxValueChange}>
        </c-fbc_flow-combobox>
    </div>
    <div class="slds-grid slds-wrap">
        <div
            class="slds-col slds-size_1-of-1 slds-panel__header-title slds-text-heading_small slds-p-top_small">
            Number of Selections
        </div>
        <div class="slds-col slds-size_1-of-2">
            <lightning-input type="number" label={inputValues.min.label} name="select_min"
                value={inputValues.min.value} onblur={handleValueChange}></lightning-input>
        </div>
        <div class="slds-col slds-size_1-of-2 slds-p-left_x-small">
            <lightning-input type="number" label={inputValues.max.label} name="select_max"
                value={inputValues.max.value} onblur={handleValueChange}></lightning-input>
        </div>
        <div class="slds-col slds-size_1-of-1">
            <lightning-input type="number" label={inputValues.size.label} name="select_size"
                value={inputValues.size.value} onblur={handleValueChange}></lightning-input>
        </div>
    </div> -->
</template>