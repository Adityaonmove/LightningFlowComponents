<template>

    <!-- Select Output Object -->
    <div class="slds-m-bottom_small slds-border_top">
        <h3 class="slds-text-heading_small slds-p-vertical_small">
            Get Records of this Object ...
        </h3>
        <div class="slds-form-element slds-size_1-of-2">
            <div class={inputValues.outputObject.class}>
                <div class="slds-form-element__control">
                    <lightning-combobox
                        name="outputObject"
                        label={inputValues.outputObject.label}
                        value={outputObject}
                        placeholder="Select object..."
                        options={typeOptions}
                        onchange={handleOutputObjectChange}
                        required>
                    </lightning-combobox>
                </div>
                <c-fsc_display-error 
                    is-error={inputValues.outputObject.isError}
                    error-message={inputValues.outputObject.errorMessage}
                ></c-fsc_display-error>
            </div>
        </div>
    </div>

    <!-- Select field to Compare -->
    <!-- TODO: Field Selector based on selected output object -->
    <div class="slds-m-bottom_small slds-border_top">
        <h3 class="slds-text-heading_small slds-p-vertical_small">
            ... where the Value of this Field ...
        </h3>
        <div class="slds-form-element slds-size_1-of-2">
            <div class="slds-form-element__control">
                <c-fsc_flow-combobox
                    name="select_targetField" 
                    label={inputValues.targetField.label}
                    value={inputValues.targetField.value} 
                    value-type={inputValues.targetField.valueDataType}
                    field-level-help={inputValues.targetField.helpText}
                    builder-context-filter-collection-boolean={inputValues.targetField.isCollection}
                    builder-context={_builderContext} 
                    onvaluechanged={handleFlowComboboxValueChange}
                    automatic-output-variables={automaticOutputVariables}>
                </c-fsc_flow-combobox>
            </div>
        </div>
    </div>

    <!-- Select IN collection type -->
    <div class="slds-m-bottom_small slds-border_top">
        <h3 class="slds-text-heading_small slds-p-vertical_small">
            ... is IN this Collection 
        </h3>
        <div class="slds-form-element__control">
            <lightning-radio-group name="select_sourceMethod"
                label={inputValues.sourceMethod.label}
                options={formatOptions}
                value={inputValues.sourceMethod.value}
                onchange={handleValueChange}
                required
                type="radio">
            </lightning-radio-group>
        </div>
    </div>

    <div class="slds-m-top_small">

        <div if:true={isSourceMethodString}>
            <c-fsc_flow-combobox 
                name="select_sourceValueString" 
                label={inputValues.sourceValueString.label}
                value={inputValues.sourceValueString.value} 
                value-type={inputValues.sourceValueString.valueDataType}
                field-level-help={inputValues.sourceValueString.helpText}
                builder-context-filter-collection-boolean={inputValues.sourceValueString.isCollection}
                builder-context={_builderContext} 
                onvaluechanged={handleFlowComboboxValueChange}
                automatic-output-variables={automaticOutputVariables}
                required>
            </c-fsc_flow-combobox>
            <div class="slds-m-top_small">
                <div class="slds-form-element slds-size_1-of-2">
                    <c-fsc_flow-combobox 
                        name="select_sourceDelimiter" 
                        label={inputValues.sourceDelimiter.label}
                        value={inputValues.sourceDelimiter.value} 
                        value-type={inputValues.sourceDelimiter.valueDataType}
                        field-level-help={inputValues.sourceDelimiter.helpText}
                        builder-context-filter-collection-boolean={inputValues.sourceDelimiter.isCollection}
                        builder-context={_builderContext} 
                        onvaluechanged={handleFlowComboboxValueChange}
                        automatic-output-variables={automaticOutputVariables}>
                    </c-fsc_flow-combobox>
                </div>
            </div>
        </div>

        <div if:true={isSourceMethodCollection}>
            <c-fsc_flow-combobox 
                name="select_sourceValueCollection" 
                label={inputValues.sourceValueCollection.label}
                value={inputValues.sourceValueCollection.value} 
                value-type={inputValues.sourceValueCollection.valueDataType}
                field-level-help={inputValues.sourceValueCollection.helpText}
                builder-context-filter-collection-boolean={inputValues.sourceValueCollection.isCollection}
                builder-context={_builderContext} 
                onvaluechanged={handleFlowComboboxValueChange}
                automatic-output-variables={automaticOutputVariables}
                required>
            </c-fsc_flow-combobox>
        </div>

        <div if:true={isSourceMethodObject} class="slds-form-element slds-size_1-of-2">
            <div class={inputValues.sourceObject.class}>
                <div class="slds-form-element__control">
                    <lightning-combobox
                        name="sourceObject"
                        label={inputValues.sourceObject.label}
                        value={sourceObject}
                        placeholder="Select object..."
                        options={typeOptions}
                        onchange={handleSourceObjectChange}
                        required>
                    </lightning-combobox>
                </div>
                <c-fsc_display-error 
                    is-error={inputValues.sourceObject.isError}
                    error-message={inputValues.sourceObject.errorMessage}
                ></c-fsc_display-error>
            </div>

            <div if:true={isSourceObjectSelected}>
                <div class="slds-m-top_small">
                    <lightning-combobox
                        name="sourceRecordCollection"
                        label={inputValues.sourceRecordCollection.label}
                        value={sourceRecordCollection}
                        placeholder={sourceRecordCollectionPlaceholder}
                        options={sourceCollectionValueOptions}
                        onchange={handlesourceRecordCollectionChange}
                        required>
                    </lightning-combobox>
                </div>

                <div class="slds-m-top_small">
                    <!-- TODO: Field Selector based on selected source object -->
                    <c-fsc_flow-combobox 
                        name="select_sourceField" 
                        label={inputValues.sourceField.label}
                        value={inputValues.sourceField.value} 
                        value-type={inputValues.sourceField.valueDataType}
                        field-level-help={inputValues.sourceField.helpText}
                        builder-context-filter-collection-boolean={inputValues.sourceField.isCollection}
                        builder-context={_builderContext} 
                        onvaluechanged={handleFlowComboboxValueChange}
                        automatic-output-variables={automaticOutputVariables}>
                    </c-fsc_flow-combobox>
                </div>
            </div>
        </div>

    </div>

    <!-- Select Output Fields -->
    <div class="slds-m-vertical_small slds-border_top">
        <div class="slds-form-element__control slds-p-top_small">
            <lightning-radio-group name="select_storeFieldsMethod"
                label={inputValues.storeFieldsMethod.label}
                options={storeRecordDataOptions}
                value={inputValues.storeFieldsMethod.value}
                onchange={handleValueChange}
                required
                type="radio">
            </lightning-radio-group>
        </div>
        <div if:true={isChooseFields} class="slds-m-top_small">
            <!-- TODO: Field Selector based on selected output object -->
            <c-fsc_flow-combobox 
                name="select_outputFieldNames" 
                label={inputValues.outputFieldNames.label}
                value={inputValues.outputFieldNames.value} 
                value-type={inputValues.outputFieldNames.valueDataType}
                field-level-help={inputValues.outputFieldNames.helpText}
                builder-context-filter-collection-boolean={inputValues.outputFieldNames.isCollection}
                builder-context={_builderContext} 
                onvaluechanged={handleFlowComboboxValueChange}
                automatic-output-variables={automaticOutputVariables}>
            </c-fsc_flow-combobox>
        </div>
    </div>

    <!-- *** Component Name and current Version # to appear at the bottom of the CPE -->
    <div class="slds-text-title slds-text-align_right slds-m-top_xx-small slds-p-bottom_small slds-text-color_success">
        Get-Records-In Version #: {versionNumber}
    </div>

</template>